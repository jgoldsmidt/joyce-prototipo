<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Joyce.ar - Sincronización de idiomas</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600&family=Cormorant+Garamond:wght@400&display=swap" rel="stylesheet">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.5.0/font/bootstrap-icons.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/tei.css">
    <style>
        body {
            font-family: 'Assistant', sans-serif;
            background-color: #f0f0f5;
            color: #000;
            transition: background-color 0.3s ease, color 0.3s ease;
            position: relative;
        }

        body.dark-mode {
            background-color: #121212;
            color: #e0e0e0;
        }

        body.dark-mode .navbar i,
        body.dark-mode .toggle-dark-mode i,
        body.dark-mode .lang-header,
        body.dark-mode .lang-header select,
        body.dark-mode .form-select,
        body.dark-mode .form-select option {
            color: #e0e0e0;
        }

        body.dark-mode .form-select {
            background-color: #333;
        }

        /* Título principal centrado */
        .header h1 {
            font-family: 'Cormorant Garamond', serif;
            text-align: center;
            font-size: 48px;
            margin: 20px 0;
        }

        /* Contenedor con scroll */
        .scroll-container {
            position: relative;
            width: 100%;
            height: 55vh;
            padding: 10px 15px;
            border-radius: 25px;
            background-color: white;
            box-shadow: 0px 10px 30px rgba(0, 0, 0, 0.15), 0px 0px 15px rgba(0, 0, 0, 0.1); 
            margin-bottom: 30px;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .dark-mode .scroll-container {
            background-color: #3a3a3a;
            color: #e0e0e0;
            box-shadow: 0px 10px 30px rgba(255, 255, 255, 0.2), 0px 0px 15px rgba(255, 255, 255, 0.1);
        }

        .scrollable-content {
            max-height: 60vh;
            overflow-y: auto;
            padding-right: 15px;
        }

        .scrollable-content::-webkit-scrollbar {
            width: 8px;
        }

        .scrollable-content::-webkit-scrollbar-thumb {
            background-color: #888;
            border-radius: 10px;
        }

        .scrollable-content::-webkit-scrollbar-thumb:hover {
            background-color: #555;
        }

        /* Estilo de los encabezados de las cajas */
        .lang-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 10px;
        }

        .form-select {
            font-family: 'Assistant', sans-serif;
            font-size: 18px;
            width: 80%;
            border: none;
            background-color: transparent;
        }

        .form-select:focus {
            outline: none;
            box-shadow: none;
        }

        .lang-circle {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            color: white;
            background: radial-gradient(circle, black, grey, white);
            width: 25px;
            height: 25px;
            border-radius: 50%;
        }

        .highlight {
            background-color: #b3b3b3;
        }
        body.dark-mode .highlight {
            background-color: #666666;
        }

        /* Ajustes del Navbar */
        .navbar {
            padding: 10px;
            justify-content: center;
        }

        @media (min-width: 992px) {
            .navbar {
                font-size: 1.2em;
            }
        }

        /* Distribución en filas de 2 cajas para tablets */
        @media (min-width: 768px) and (max-width: 991px) {
            .col-md-4 {
                flex: 0 0 50%;
                max-width: 50%;
            }
        }

        /* Ajustes para pantallas pequeñas */
        @media (max-width: 576px) {
            .scroll-container {
                height: 45vh;
            }

            .lang-circle {
                width: 20px;
                height: 20px;
                font-size: 10px;
            }

            .form-select {
                font-size: 16px;
                width: 75%;
            }
        }

        /* Botón de modo oscuro en Navbar */
        .toggle-dark-mode {
            position: absolute;
            right: 20px;
            top: 10px;
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
        }
    </style>
</head>
<body>

<!-- Navbar con íconos -->
<nav class="navbar navbar-expand">
    <div class="container-fluid justify-content-center">
        <div class="d-flex">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="#"><i class="bi bi-arrow-left" style="font-size: 1.3em"></i></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#"><i class="bi bi-gear" style="font-size: 1.3em"></i></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#"><i class="bi bi-house" style="font-size: 1.3em"></i></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#"><i class="bi bi-book" style="font-size: 1.3em"></i></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#"><i class="bi bi-person" style="font-size: 1.3em"></i></a>
                </li>
            </ul>
        </div>
        <!-- Botón para alternar modo oscuro -->
        <button class="toggle-dark-mode"><i class="bi bi-moon-fill" style="font-size: 1.1em"></i>
        </button>
    </div>
</nav>

<!-- Header con el título central restaurado -->
<div class="header">
    <h1> JOYCE LE SYMPTOME I</h1>
</div>

<!-- Sección de contenido con 6 cajas, distribuidas en 2 filas -->
<div class="container">
    <div class="row">
        <!-- Sección de contenido con 6 cajas, distribuidas en 2 filas -->
<div class="container">
    <div class="row">
        <div class="col-md-4 col-sm-12">
            <div class="scroll-container" id="scroll1">
                <div class="lang-header">
                    <select onchange="updateContent(1, this.value)" class="form-select">
                        <option value="es" selected>Gómez - Traducción andante</option>
                        <option value="fr">Miller - L’âne, 1982, n° 6.2</option>
                        <option value="en">APW</option>
                    </select>
                    <span class="lang-circle" id="lang-circle-1">ES</span>
                </div>
                <div class="scrollable-content" id="content1">
                    
                </div>
            </div>
        </div>
        <div class="col-md-4 col-sm-12">
            <div class="scroll-container" id="scroll2">
                <div class="lang-header">
                    <select onchange="updateContent(2, this.value)" class="form-select">
                        <option value="fr" selected>Miller - L’âne, 1982, n° 6.2</option>
                        <option value="es">Gómez - Traducción andante</option>
                        <option value="en">APW</option>
                    </select>
                    <span class="lang-circle" id="lang-circle-2">FR</span>
                </div>
                <div class="scrollable-content" id="content2">
                    <p class="equivalent" data-id="1">
                        Je ne suis pas dans ma meilleure forme aujourd’hui, pour toutes sortes de raisons.
                    </p>
                    <p class="equivalent" data-id="2">
                        Avec l’agrément de Jacques Aubert, à l’insistance duquel vous devez de me voir ici – Jacques Aubert qui est un éminent joycien, et dont la thèse sur l’esthétique de Joyce est un ouvrage éminemment recommandable –, j’ai pris comme titre – Joyce le symptôme.
                    </p>
                </div>
            </div>
        </div>
        <div class="col-md-4 col-sm-12">
            <div class="scroll-container" id="scroll3">
                <div class="lang-header">
                    <select onchange="updateContent(3, this.value)" class="form-select">
                        <option value="en" selected>APW</option>
                        <option value="es">Gómez - Traducción andante</option>
                        <option value="fr">Miller - L’âne, 1982, n° 6.2</option>
                    </select>
                    <span class="lang-circle" id="lang-circle-3">EN</span>
                </div>
                <div class="scrollable-content" id="content3">
                    <p class="equivalent" data-id="1">
                        I’m not in the best shape today, for a lot of reasons.
                    </p>
                    <p class="equivalent" data-id="2">
                        With the agreement of Jacques Aubert, at whose insistence you all have to look at me today—Jacques Aubert, an eminent Joycean whose thesis on the aesthetics of Joyce is an eminently recommendable work—I have taken as my title Joyce the Symptom.
                    </p>
                </div>
            </div>
        </div>
        <div class="col-md-4 col-sm-12">
            <div class="scroll-container" id="scroll4">
                <div class="lang-header">
                    <select onchange="updateContent(4, this.value)" class="form-select">
                        <option value="es" selected>Gómez - Traducción andante</option>
                        <option value="fr">Miller - L’âne, 1982, n° 6.2</option>
                        <option value="en">APW</option>
                    </select>
                    <span class="lang-circle" id="lang-circle-4">ES</span>
                </div>
                <div class="scrollable-content" id="content4">
                    <p class="equivalent" data-id="1">
                        Hoy no estoy en mi mejor forma, por todo tipo de razones.
                    </p>
                    <p class="equivalent" data-id="2">Con el asentimiento de Jacques Aubert, por la insistencia del cual me ven aquí -Jacques Aubert, que es un eminente joyciano y cuya tesis sobre la estética de Joyce es una obra altamente recomendable-, tomé como título Joyce el síntoma.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4 col-sm-12">
            <div class="scroll-container" id="scroll5">
                <div class="lang-header">
                    <select onchange="updateContent(5, this.value)" class="form-select">
                        <option value="es" selected>Gómez - Traducción andante</option>
                        <option value="fr">Miller - L’âne, 1982, n° 6.2</option>
                        <option value="en">APW</option>
                    </select>
                    <span class="lang-circle" id="lang-circle-5">ES</span>
                </div>
                <div class="scrollable-content" id="content5">
                    <p class="equivalent" data-id="1">
                        Hoy no estoy en mi mejor forma, por todo tipo de razones.
                    </p>
                    <p class="equivalent" data-id="2">Con el asentimiento de <span class="nombre-persona" data-name="Jacques Aubert">Jacques Aubert</span>, por la insistencia del cual me ven aquí -Jacques Aubert, que es un eminente joyciano y cuya tesis sobre la estética de Joyce es una obra altamente recomendable-, tomé como título Joyce el síntoma.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4 col-sm-12">
            <div class="scroll-container" id="scroll6">
                <div class="lang-header">
                    <select onchange="updateContent(6, this.value)" class="form-select">
                        <option value="es" selected>Gómez - Traducción andante</option>
                        <option value="fr">Miller - L’âne, 1982, n° 6.2</option>
                        <option value="en">APW</option>
                    </select>
                    <span class="lang-circle" id="lang-circle-6">ES</span>
                </div>
                <div class="scrollable-content" id="content6">
                    <p class="equivalent" data-id="1">
                        Hoy no estoy en mi mejor forma, por todo tipo de razones.
                    </p>
                    <p class="equivalent" data-id="2">Con el asentimiento de Jacques Aubert, por la insistencia del cual me ven aquí -Jacques Aubert, que es un eminente joyciano y cuya tesis sobre la estética de Joyce es una obra altamente recomendable-, tomé como título Joyce el síntoma.</p>
                </div>
            </div>
        </div>
    </div>
</div>
    </div>
</div>
<script src="/CETEI.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        let cetei = new CETEI();

        // Cargar el archivo TEI y añadirlo al contenido de la página
        cetei.getHTML5("./ej.tei", (data) => {
            document.getElementById("content1").appendChild(data);

            // Asignar data-id a los párrafos una vez que el contenido esté listo
            assignDataIds();

            // Inicializar eventos de sincronización y resaltado
            initializeSyncAndEvents();
        }).catch(error => {
            console.error("Error al cargar el archivo TEI:", error);
        });
    });

    function assignDataIds() {
        // Seleccionar todos los elementos <p> que provienen del archivo TEI
        const paragraphs = document.querySelectorAll("#content1 p");

        paragraphs.forEach((paragraph) => {
            // Asignar el valor del atributo id del XML al atributo data-id
            const xmlId = paragraph.getAttribute('id');
            if (xmlId) {
                paragraph.classList.add('equivalent'); // Añadir la clase 'equivalent' para identificarlos
                paragraph.setAttribute('data-id', xmlId); // Usar el id del XML como identificador único
            }
        });
    }

    function initializeSyncAndEvents() {
        // Sincronizar scroll entre todas las cajas
        const scrollElements = [
            document.querySelector('#scroll1 .scrollable-content'),
            document.querySelector('#scroll2 .scrollable-content'),
            document.querySelector('#scroll3 .scrollable-content'),
            document.querySelector('#scroll4 .scrollable-content'),
            document.querySelector('#scroll5 .scrollable-content'),
            document.querySelector('#scroll6 .scrollable-content')
        ];

        scrollElements.forEach((scrollElement) => {
            scrollElement.addEventListener('scroll', () => {
                scrollElements.forEach(target => {
                    if (target !== scrollElement) {
                        syncScroll(scrollElement, [target]);
                    }
                });
            });
        });
    }

    function syncScroll(source, targets) {
        const scrollPercentage = source.scrollTop / (source.scrollHeight - source.clientHeight);
        targets.forEach(target => {
            const targetScrollTop = scrollPercentage * (target.scrollHeight - target.clientHeight);
            target.scrollTop = targetScrollTop;
        });
    }

    // Delegación de eventos para hover en párrafos equivalentes
    document.addEventListener('mouseover', (event) => {
        if (event.target.classList.contains('equivalent')) {
            highlightParagraphs(event.target);
        }
    });

    document.addEventListener('mouseout', (event) => {
        if (event.target.classList.contains('equivalent')) {
            removeHighlight(event.target);
        }
    });

    function highlightParagraphs(paragraph) {
        const dataId = paragraph.getAttribute('data-id');
        const equivalents = document.querySelectorAll(`.equivalent[data-id="${dataId}"]`);
        equivalents.forEach(el => el.classList.add('highlight'));
    }

    function removeHighlight(paragraph) {
        const dataId = paragraph.getAttribute('data-id');
        const equivalents = document.querySelectorAll(`.equivalent[data-id="${dataId}"]`);
        equivalents.forEach(el => el.classList.remove('highlight'));
    }
</script>

</body>
</html>